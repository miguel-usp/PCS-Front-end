<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <title>Mi Casa Su Casa - Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="CSS/style.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</head>

<body>
    <nav class="navbar navbar-dark fixed-top bg-green">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                Mi Casa Su Casa
            </a>
        </div>
    </nav>

    <div class="container">
        <div class="row" style="min-height: 100vh;">
            <div class="col-6 d-flex flex-column align-items-center justify-content-center">
                <img class="" src="imgs/logo-texto.png" />
            </div>
            <div class="col-6 d-flex flex-column justify-content-around align-items-stretch">
                <div class="list-group shadow">
                    <p class="d-flex justify-content-center list-group-item list-group-item-action active m-0 h4 bg-green border-green"
                        aria-current="true">
                        <strong>Senha atual</strong>
                    </p>
                    <div class="list-group-item text-center py-4 d-flex align-items-center justify-content-center"
                        style="min-height: 105px;" id="spinPass">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                    <p class="display-5 list-group-item list-group-item-action mb-0 py-4 text-center d-none"
                        id="txtPass">
                    </p>
                    <div class="progress rounded-bottom" style="border-radius: 0">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25"
                            aria-valuemin="0" aria-valuemax="30" id="progTimer"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-analytics.js"></script>

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyBOneWagWEe-JLdeFuAKjsafHx3WRJNgs0",
            authDomain: "projeto-pcs.firebaseapp.com",
            databaseURL: "https://projeto-pcs-default-rtdb.firebaseio.com",
            projectId: "projeto-pcs",
            storageBucket: "projeto-pcs.appspot.com",
            messagingSenderId: "415874711827",
            appId: "1:415874711827:web:c0d4a878d793af7f685ae6",
            measurementId: "G-P51H8B053M"
        };
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        var starCountRef = firebase.database().ref('portas/-MefAucAJHPw7IHZ4ga8');
        $('#progTimer').css('width', "0%");
        starCountRef.on('value', (snapshot) => {
            const data = snapshot.val();
            $('#progTimer').css('width', `${data.timer * 100 / 30}%`);
            $('#txtPass').removeClass('d-none').text(data.senha);
            $('#spinPass').addClass('d-none');
        });
    </script>
</body>

</html>